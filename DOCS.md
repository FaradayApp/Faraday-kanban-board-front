- [Установка и запуск приложения](#установка-и-запуск-приложения)
- [Роутинг](#роутинг)
  - [Не авторизованные пользователи](#не-авторизованные-пользователи)
  - [Авторизованные пользователи](#авторизованные-пользователи)
  - [Группа роутов доступных пользователю с правами администратора](#группа-роутов-доступных-пользователю-с-правами-администратора)
  - [Группа роутов доступных авторизованному пользователю](#группа-роутов-доступных-авторизованному-пользователю)
- [Модели приложения](#модели-приложения)
  - [Пользователь приложения](#пользователь-приложения)
  - [Форма добавления и редактирования задачи](#форма-добавления-и-редактирования-задачи)
  - [Задача доски](#задача-доски)
- [Структура приложения](#структура-приложения)
- [Локализация](#локализация)


## Установка и запуск приложения

Требуется:
 - Node.js LTS, 16+ или 18+ версии

Установка зависимостей:

`npm install`

Сборка прод. версии: 

`npm run build`

Артефакты сборки будут расположены в директории **/dist** в корне проекта.

Запуск в режиме разработки:

`npm run dev`

Переменные среды (задаются в .env и dockerfile):

**VITE_BASE_URL** - задает url api.

**VITE_SITE_URL** - задает url сайта, с помощью него формируются абсолютные ссылки на доски.


## Роутинг

### Не авторизованные пользователи

> Переход на сайт предполагается только из WebView мобильного приложения, по этой причине страница 404 не предусмотрена, так как пользователь не может управлять роутингом самостоятельно

Для неавторизованного пользователя:
 - При переходе на роут **/admin/boards** будет доступна форма авторизации администратора
 - При переходе на роут **/board/{uuid}** будут доступны формы авторизации и регистрации пользователя, после успешной авторизации/регистрации, пользователь будет добавлен в список пользователей доски **{uuid}** и станет доступен для добавления в исполнители задач

Ограничения:
- Авторизация администратора невозможна через форму авторизации пользователя
- Авторизация пользователя невозможна через форму авторизации администратора

### Авторизованные пользователи

#### Группа роутов доступных пользователю с правами администратора: 

**/admin/boards** — страница для управления досками, доступна функциональность:
  - Создание доски
  - Удаление доски
  - Изменение заметки о доске
  - Копирование ссылки на доску

**/admin/profile** - страница с информацией о профиле администратора.


#### Группа роутов доступных авторизованному пользователю: 

> **{uuid}** - UUID доски, является **обязательным** параметром

> Ссылку на доску можно получить в панели администратора **/admin/boards**

> Мобильное приложение должно открывать роут **/board/{uuid}** в WebView

**/board/{uuid}** - сттраница на которой доступен список задач данной доски, доступна функциональность:
  - Изменение статуса задачи (перетаскиванием в другую колонку)
  - Сортировка задач в рамках одной колонки

С неё возможен переход на следующие страницы:
  - Информации о задаче (при нажатии на карточку задачи)
  - Создание новой задачи
  - Профиль пользователя

**/board/{uuid}/task/{id}** - страница на которой доступна информация о задаче, доступна функциональность:
  - Изменение описания задачи
  - Просмотр комментариев других пользователей  
  - Добавление, изменение, удаление комментария пользователем

С неё возможен переход на следующие страницы:
  - Редактирование задачи
  - Список всех задач доски

**/board/{uuid}/task/{id}/edit** - страница редактирование информации о задаче, доступна функциональность:
  - [Форма редактирования задачи](#форма-добавления-и-редактирования-задачи)

С неё возможен переход на следующие страницы:
  - Информации о задаче

**/board/{uuid}/task/create** - страница создания новой задачи, доступна функциональность:
  - [Форма создания задачи](#форма-добавления-и-редактирования-задачи)

С неё возможен переход на следующие страницы:
  - Список всех задач доски

**/board/{uuid}/profile** - страница с информацие о профиле пользователя

## Модели приложения

> Модели приходящие с бекенда трансформируются в модели используемые приложением в слое **/shared/api**, typescript-типы моделей приложения расположены в **/entities**.

### Пользователь приложения

Имеет следующие поля:
  - id
  - avatar
  - first_name
  - last_name
  - username

> Администратор является также пользователем доски и ему доступна вся функциональность пользователя доски, роль администратор/обычный пользователь отсутвует в модели пользователя, поэтому нет разделения на роли пользователей в ui. Пользователю доски не доступны запросы к /api, требующие прав администратора, он не может взаимодействовать со списком всех существующих досок.

### Форма добавления и редактирования задачи

Имеет следующие поля доступные при редактирвания/создании задачи:
  - title (обязательное поле)
  - status (обязательное поле)
  - priority (обязательное поле)
  - description (обязательное поле)
  - expiration_date (Дата дедлайна задачи, обязательное поле, в ui доступен выбор даты начиная с текущего дня, в api возможна устанвока любой даты)
  - performers (Выбор исполнителей для задачи, из числа пользователей зарегестрированных для данной доски, пустой список исполнителей допустим)

### Задача доски

Имеет следующие поля:
  - comments
  - description
  - expiration_date (дата дедлайна)
  - id
  - performers (список исполнителей)
  - priority
  - producer (Пользователь, создавший задачу)
  - staging_date (дата создания задачи, устанавливается на бекенде)
  - status
  - title

Возможные статусы задачи (_строковый литерал в типах приложения - число в типах бекенда_): 
  - BACKLOG - 1
  - TODO - 2
  - IN_PROGRESS - 3
  - DONE - 4
  - ARCHIVE - 5

Возможные приоритеты задачи (_строковый литерал в типах приложения - число в типах бекенда_): 
  - HIGH - 1
  - MEDIUM - 2
  - LOW - 3


## Структура приложения

- **/shared** - переиспользуемые во всём приложении модули
  - **/api** - в этом слое содержатся запросы к бекенду,    типы бекенда валидируются и трансформируются в типы приложения (entities), используется zod для валидации данных с бекенда
- **/enitities** - слой моделей приложения (ts типы), а так же ui-компоненты, зависящие от этих моделей
- **/widgets** - ui компоненты, объединяющие в себе компоненты из **/shared** и **/entities**, вызывают **/features**
- **/providers** - роутинг, уведомления, начальная загрузка данных в сторы
- **/stores** - mobx сторы для хранения данных, содержат в себе логику для работы с хранимыми данными
- **/features** - слой фич приложения, содержит логику приложения, делает запросы к /api, изменяет состояние сторов
- **/pages** страницы приложения, ипортируют **/widgets** и **/features**

## Локализация

Для локализации используется библиотека i18n, файлы c rk.xfvb локализации расположены в /public/locales (доступна ru-локализация) 
